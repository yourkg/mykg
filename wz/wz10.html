<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>KG_NOTE</title>
<meta name="description" content="KG">
<meta name="keywords" content="django" />

<!-- Favicons
    ================================================== -->

<link rel="shortcut icon" href="../favicon.ico" type="../image/x-icon">


<!-- Bootstrap -->
<link rel="stylesheet" type="text/css"  href="../css/bootstrap.css">
<link rel="stylesheet" type="text/css" href="../fonts/font-awesome/css/font-awesome.css">

<!-- Slider
    ================================================== -->
<link href="../css/owl.carousel.css" rel="stylesheet" media="screen">
<link href="../css/owl.theme.css" rel="stylesheet" media="screen">

<!-- Stylesheet
    ================================================== -->
<link rel="stylesheet" type="text/css"  href="../css/style.css">
<link rel="stylesheet" type="text/css" href="../css/prettyPhoto.css">

<link rel="stylesheet" type="text/css" href="../fonts/sns_fonts/iconfont.css">


<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
  <div id="particles-js"></div>
  <script src="../js/particles.js"></script>
  <script src="../js/app.js"></script>
<body id="page-top" data-spy="scroll" data-target=".navbar-fixed-top">
    <!-- Navigation -->
    <nav class="navbar navbar-custom navbar-fixed-top" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-main-collapse">
                    <i class="fa fa-bars"></i>
                </button>
                <a class="navbar-brand page-scroll" href="#page-top"><i class="fa fa-terminal"></i>回顶部</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse navbar-right navbar-main-collapse">
                <ul class="nav navbar-nav">
                    <!-- Hidden li included to remove active class from about link when scrolled up past about section -->
                    <li class="hidden">
                        <a href="#page-top"></a>
                    </li>
                    <li>
                        <a class="page-scroll" href="../index.html">首页</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="../sjz.html">全部文章</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="../AI.html">机器学习</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="../other.html">OTHERS</a>
                    </li>                    
                    <li>
                        <a class="page-scroll" href="../index.html#contact">联系方式</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

<!-- Header -->
    <header class="intro" >
        <div class="intro-body">
            <div class="container">
                <div class="row" style="text-align: left">
                  <div class="col-md-8 col-md-offset-2">
                        <!--<h1><span class="brand-heading"><img style='width:50%;height:50%; border-radius:50%'src='123.png'></img></span></h1>-->
                        <p class="intro-text">
													<br />
													<br />
													<br />
													<p> 以后会更正排版</p>
                    <pre><code>上次已经将模板的相关设置搞好了，接下来开始写功能：
首先我们需要一个登录的功能：
先把界面写好：
<img src="wz10.html.img/1.png" />
如上图，在模板文件里把界面写好，样式放在css里，调用的功能放在js里
其它的不多说，着重介绍django特有的，比如这里的csrf，这是diango后台防止表单的请求伪造的设置
具体做法就是在要提交的表单里加上这个，后台在构建页面的时候会在这里生成一个新的标签，具体不详说了
总之用法很简单从这里放上就行。
还有就是这里我用ajax进行表单提交，所以设置的时候另外注意：
<img src="wz10.html.img/2.png" />
设置好前台的ajax发送后，要在urls.py里设置响应函数：
<img src="wz10.html.img/3.png" />
这里是配置的views里的函数：
<img src="wz10.html.img/4.png" />
通过先获取ajax传过来的数据，然后进行查数据库比对，然后返回一些口令，跟一些简单的信息
还可以给前台设置cookie。

然后就是前台ajax部分收到返回的数据进行进一步操作，就实现了我们所常见的登录操作：
<img src="wz10.html.img/5.png" />
当然，这个登录还可以进一步完善，比如在后台统计登录人数，和看谁在线的时候这在后期可以填补

紧接着我们要对各用户功能进一步设计：




在app的admin.py里这样引入models的类：
<img src="wz9.html.img/6.png" />
运行网站去admin界面查看可以看到已经有了，而且可以添加删除操作。
<img src="wz9.html.img/7.png" />
但是很别扭，需要对这个数据库管理界面进行进一步设置:
<img src="wz9.html.img/8.png" />
对人员表进行了设置，包括显示列，外键，还加了个搜索。随便加入一条数据大致如下：
<img src="wz9.html.img/9.png" />
需要注意的是，在该网站的设计中是不希望我们通过以上方式添加删除数据的，以上的所有准备以及
操作都是是为了代替一个Mysql管理工具的作用。方便在后面的捣鼓中查看修改数据。
以上内容的主要参考：-><a href="https://www.runoob.com/django/django-admin-manage-tool.html">https://www.runoob.com/django/django-admin-manage-tool.html</a>

下面继续进行网站建设，首先我们要做网站的模板页，之前设计了两个模板页，这次决定只用一个模板页，
首先就是先把网站模板页基本内容做好，之后再在功能上继续边修改边写后台：
下面先把模板基本所需文件铺设好：
模板就是用html文件去做，故在默认的templates文件夹下新建文件
<img src="wz9.html.img/10.png" />
注意在setting.py里模板文件位置的设置，这里已经默认设置好了：
<img src="wz9.html.img/11.png" />
我们在模板里加入一语句来先来试试
<img src="wz9.html.img/12.png" />
本来想自己新建一个处理文件，既然app里已经有一个view.py了就在里面写吧：
<img src="wz9.html.img/13.png" />
<img src="wz9.html.img/14.png" />
写好后设置一下url
这样写就是直接打开的主页了：
<img src="wz9.html.img/15.png" />
打开一下，发现没有问题：
<img src="wz9.html.img/16.png" />

现在有一个问题就是给模板加CSS样式跟JS脚本，我们不希望它们跟模板的html写在一个文件里，
因为这样不专业。。。但是经过之前的网站设计发现如果给模板引用CSS跟JS脚本文件，在前端也就是用户
浏览器上是不会加载到的，例如像这样：
<img src="wz9.html.img/17.png" />
<img src="wz9.html.img/18.png" />
这主要是Django需要专门对静态文件进行设置：
在settings.py的最下面紧跟着STATIC_URL加上：
<img src="wz9.html.img/19.png" /> 
然后在根目录建个static的文件夹把CSS文件放进去即可，当然在哪建这个文件夹都无所谓，跟你上面配的路径对起来即可
(我打完这句话就立马把它放templates文件夹里了，因为我感觉这些静态文件无非给模板服务的，离得近点比较好，强迫症)
<img src="wz9.html.img/20.png" />
<img src="wz9.html.img/20.1.png" />
引用的时候直接static/+文件名即可(跟STATIC_URL里对应起来)，这里正巧跟正常引用一样。
<img src="wz9.html.img/21.png" />
可以看到CSS生效了
<img src="wz9.html.img/22.png" />
 
ok了，JS文件同理，这样就搞定前端文件的分离了

接下来就是正式写功能了

-----------------------------------------------------------------------------------skip2 

</code></pre></p>
                    </div>

                </div>
            </div>
        </div>
    </header>

<nav id="footer">
  <div class="container">
    <div class="pull-left fnav">
      <p>Copyright &copy; 2019 KG
    </div>
    <div class="pull-right fnav">
      <ul class="footer-social">
	    <li><a href="http://v.t.sina.com.cn/share/share.php?url=http://blog.youzewang.com/jianli&title=Baron简历"><i class="icon iconfont">&#xe66e;</i></a></li>
        <li><a href="http://connect.qq.com/widget/shareqq/index.html?url=http://blog.youzewang.com/jianli=&title=Baron简历"> <i class="icon iconfont">&#xe629;</i></a></li>
        <li><a href="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=http://blog.youzewang.com/jianli&title=Baron简历"> <i class="icon iconfont">&#xe616;</i></a></li>

        <li><a href="http://share.renren.com/share/buttonshare.do?link=http://blog.youzewang.com/jianli&title=Baron简历"><i class="icon iconfont">&#xe66b;</i></a></li>
      </ul>
    </div>
  </div>
</nav>

<!-- jQuery (necessary for Bootstrap's JavaScript plugins) --> 
<script type="text/javascript" src="../js/jquery.1.11.1.js"></script>
<!-- Include all compiled plugins (below), or include individual files as needed --> 
<script type="text/javascript" src="../js/bootstrap.js"></script>
<script type="text/javascript" src="../js/SmoothScroll.js"></script>
<script type="text/javascript" src="../js/jquery.prettyPhoto.js"></script>
<script type="text/javascript" src="../js/jquery.isotope.js"></script>
<script type="text/javascript" src="../js/jquery.counterup.js"></script>
<script type="text/javascript" src="../js/waypoints.js"></script>
<script type="text/javascript" src="../js/jqBootstrapValidation.js"></script>
<script type="text/javascript" src="../js/contact_me.js"></script>
<script src="../js/owl.carousel.js"></script>

<!-- Javascripts
    ================================================== --> 
<script type="text/javascript" src="../js/main.js"></script>

<script>
 $(function()
 {
 var u = navigator.userAgent;
if (u.indexOf('Android') > -1 || u.indexOf('Linux') > -1||u.indexOf('iPhone') > -1||u.indexOf('Windows Phone') > -1||navigator.userAgent.indexOf("iPad")>-1) {
   $(".hover-bg .hover-text").css({'opacity':'1'});
   
   $(".hover-bg .hover-text>h4").css({'opacity':'1','-webkit-transform':'translateY(0)','transform':'translateY(0)'});
   
   $(".hover-bg .hover-text>i").css({'opacity':'1'});
} 
    
 });
  
</script>
</body>
</html>
